<%- include("../includes/header.ejs") %>
  </head>

  <body>
    <%- include("../includes/navbar.ejs") %>
    <main >
      <div class="container mt-4">
        <h1>Your Shopping Cart</h1>
        <hr />
        <% if (products.length > 0) { %>
        <table class="table">
          <thead>
            <tr>
              <th scope="col">Image</th>
              <th scope="col">Product</th>
              <th scope="col">Quantity</th>
              <th scope="col">Price</th>
              <th scope="col">Actions</th>
            </tr>
          </thead>
          <tbody>
            <% products.forEach(({productData, qty}) => { %>
            <tr>
              <td>
                <img
                  src="<%= productData.imageUrl %>"
                  alt="<%= productData.title %>"
                  style="width: 50px; height: auto"
                />
              <td><%= productData.title %></td>
              <td><%= qty %></td>
              <td>$<%= productData.price %></td>
              <td>
                <form
                  action="/cart-delete-item"
                  method="POST"
                  style="display: inline"
                >
                  <input
                    type="hidden"
                    name="productId"
                    value="<%= productData.id %>"
                  />
                  <button type="submit" class="btn btn-danger btn-sm">
                    Remove
                  </button>
                </form>
              </td>
            </tr>
            <% }); %>
          </tbody>
        </table>
        <% } else { %>
        <p>Your cart is empty.</p>
        <% } %>
      </div>
<%- include("../includes/footer.ejs") %>